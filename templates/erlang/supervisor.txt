-behaviour(supervisor).

%% API
-export([start_link/0]).

%% Supervisor callbacks
-export([init/1]).

%%--------------------------------------------------------------------
%% API
%%--------------------------------------------------------------------

%%--------------------------------------------------------------------
%% @spec start_link() -> {ok,Pid} | ignore | {error,Error}
%% @doc Starts the supervisor
%% @end
%%--------------------------------------------------------------------
start_link() ->
  supervisor:start_link({local, ?SERVER}, ?MODULE, []).

%%--------------------------------------------------------------------
%% Supervisor callbacks
%%--------------------------------------------------------------------

%%--------------------------------------------------------------------
%% @private
%% @spec init(Args) -> {ok,  {SupFlags,  [ChildSpec]}} |
%%                     ignore                          |
%%                     {error, Reason}
%% @doc Whenever a supervisor is started using»
%% supervisor:start_link/[2,3], this function is called by the new process»
%% to find out about restart strategy, maximum restart frequency and child»
%% specifications.
%% @end
%%--------------------------------------------------------------------
init([]) ->
  SupFlags = {one_for_all, 10, 60},
  {ok, {SupFlags, [child(http_mock_facade, [])]}}.

%%--------------------------------------------------------------------
%% Internal functions
%%--------------------------------------------------------------------
child(Module, Args) ->
  {Module,
    {Module, start_link, Args},
    permanent,
    2000,
    worker,
    [Module]}.
